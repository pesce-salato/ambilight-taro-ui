@import 'pkg:@ambilight-taro/core';

$root: with-prefix('capsule-selector');
$root-padding-css-var-name: '--#{$root}-padding';
$root-height-css-var-name: '--#{$root}-height';

$root-padding: var(#{$root-padding-css-var-name}, size(6));
$root-height: var(#{$root-height-css-var-name}, size(64));

.#{$root} {
  padding: $root-padding;
  height: $root-height;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  flex-direction: row;
  position: relative;
  z-index: z-index('base');
  border-radius: calc($root-height / 2);
  overflow: hidden;

  &--size-md {
    #{$root-padding-css-var-name}: size(6);
    #{$root-height-css-var-name}: size(64);
    font-size: font-size('comment');

    .#{$root}__indicator {
      box-shadow: 0 0 size(4) semantic-color('shadow');
    }
  }

  &--size-sm {
    #{$root-padding-css-var-name}: size(4);
    #{$root-height-css-var-name}: size(48);
    font-size: font-size('assist');

    .#{$root}__indicator {
      box-shadow: 0 0 size(2) semantic-color('shadow');
    }
  }

  $option: #{&}__option;

  &--theme-gray {
    background: semantic-color('divider');
    color: semantic-color('font-primary');

    #{$option}--selected {
      color: semantic-color('brand');
    }
  }

  &--theme-brand {
    background: semantic-color('brand');
    color: semantic-color('font-primary-reverse');

    #{$option}--selected {
      color: semantic-color('brand');
    }
  }

  #{$option},&__indicator-wrapper,&__separator-wrapper {
    height: calc($root-height - 2 * $root-padding);
  }

  #{$option} {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color animation-time() timing-function();

    &--selected {
      font-weight: bold;
    }
  }

  &__indicator-wrapper,&__separator-wrapper {
    width: calc(100% - 2 * $root-padding);
    left: $root-padding;
    top: $root-padding;
    position: absolute;
    z-index: z-index('bg');
    pointer-events: none;
  }

  &__separator {
    width: size(2);
    margin-left: size(-1);
    height: 50%;
    top: 50%;
    transform: translateY(-50%) translateX(-50%);
    background: semantic-color('divider');
    opacity: 0;
    position: absolute;
    transition: opacity animation-time() timing-function();

    &--active {
      opacity: 1;
    }
  }

  &__indicator-wrapper {
    transition: transform animation-time() timing-function();
  }

  &__indicator {
    width: var(--al-capsule-selector-indicator-width, 0);
    background: semantic-color('bg');
    height: 100%;
    border-radius: calc($root-height / 2 - $root-padding);
  }
}
